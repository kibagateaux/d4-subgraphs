type Feed @entity {
  id: ID! # address
  nodes: [Node!]!
  payments: [Payment!] @derivedFrom(field: "feed")
  startBlock: BigInt! # when this subgrpah starts tracking data, not initial deployment
  service: String! # chainlink service that feed operate e.g. VRF, Keeper, Price Feed
}

type Node @entity {
  id: ID!  # address
  payments: [Payment!] @derivedFrom(field: "to")
}

type Payment @entity(immutable: true) {
  id: ID! # txHash+feedAddress+nodeAddress
  amount: BigInt!
  usd: BigDecimal! # value of tokens in usd at payment block
  timestamp: BigInt!
  block: BigInt!
  to: Node!
  feed: Feed!
}

type GlobalSummary @entity {
  id: ID! # 0x0
  totalTokensPaid: BigInt! # in LINK
  totalUsdPaid: BigDecimal!
}
